{"version":3,"sources":["webpack:///./src/views/Room.vue?7d52","webpack:///./src/components/GameWaiting.vue?00c7","webpack:///src/components/GameWaiting.vue","webpack:///./src/components/GameWaiting.vue?ced4","webpack:///./src/components/GameWaiting.vue","webpack:///src/views/Room.vue","webpack:///./src/views/Room.vue?3e48","webpack:///./src/views/Room.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","isLoading","_v","_s","roomSlug","userPhase","staticRenderFns","GameWaitingvue_type_template_id_af55cb2e_render","staticStyle","padding","font-size","_l","roomUser","key","slug","name","value","klass","attrs","color","on","click","$event","plus","width","text-align","display","minus","roomClassesSum","roomUsers","length","staticClass","gameStart","GameWaitingvue_type_template_id_af55cb2e_staticRenderFns","GameWaitingvue_type_script_lang_js_","computed","roomClasses","sum","$store","getters","userName","userSlug","get","set","commit","created","socket","that","console","log","res","classes","alert","destroyed","off","methods","emit","components_GameWaitingvue_type_script_lang_js_","component","Object","componentNormalizer","GameWaiting","Roomvue_type_script_lang_js_","data","components","$router","history","current","params","dispatch","then","push","path","query","redirect_to","catch","err","views_Roomvue_type_script_lang_js_","Room_component","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0c4813.9c042efd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.isLoading)?_c('div',[_c('div',[_c('div',[_vm._v(\"ルーム\"+_vm._s(_vm.roomSlug))])]),_c('div',[_vm._v(\"\\n    \"+_vm._s(_vm.userPhase)+\"\\n    \"),_c('GameWaiting')],1)]):_c('div',[_vm._v(\"\\n  入室中...\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"16px\"}},[_c('div',[_c('div',{staticStyle:{\"font-size\":\"1.5em\"}},[_vm._v(\"参加プレイヤー一覧\")]),_vm._l((_vm.roomUsers),function(roomUser){return _c('div',{key:roomUser.slug},[_c('div',[_vm._v(_vm._s(roomUser.name))])])})],2),_c('div',[_c('div',{staticStyle:{\"font-size\":\"1.5em\"}},[_vm._v(\"役職一覧\")]),_vm._l((_vm.roomClasses),function(value,klass){return _c('div',{key:klass},[_c('div',[_vm._v(_vm._s(klass)),_c('button',{attrs:{\"color\":\"blue\"},on:{\"click\":function($event){return _vm.plus(klass)}}},[_vm._v(\"+\")]),_c('span',{staticStyle:{\"width\":\"50px\",\"text-align\":\"center\",\"display\":\"inline-block\"}},[_vm._v(_vm._s(value || 0))]),_c('button',{on:{\"click\":function($event){return _vm.minus(klass)}}},[_vm._v(\"-\")])])])}),_c('div',[_c('div',[_vm._v(\"合計\"+_vm._s(_vm.roomClassesSum)+\"/(\"+_vm._s(_vm.roomClassesSum - _vm.roomUsers.length)+\")\")])])],2),_c('div',{staticClass:\"q-mt-md text-center\"},[_c('button',{on:{\"click\":function($event){return _vm.gameStart()}}},[_vm._v(\"ゲーム開始\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"padding: 16px;\">\n    <div>\n      <div style=\"font-size: 1.5em;\">参加プレイヤー一覧</div>\n      <div v-for=\"roomUser in roomUsers\" :key=\"roomUser.slug\">\n        <div>{{ roomUser.name }}</div>\n      </div>\n    </div>\n    <div>\n      <div style=\"font-size: 1.5em;\">役職一覧</div>\n      <div v-for=\"(value, klass) in roomClasses\" :key=\"klass\">\n        <div>{{ klass }}<button color=\"blue\" @click=\"plus(klass)\">+</button><span style=\"width: 50px;text-align: center;display: inline-block;\">{{ value || 0 }}</span><button @click=\"minus(klass)\">-</button></div>\n      </div>\n      <div>\n        <div>合計{{ roomClassesSum }}/({{roomClassesSum - roomUsers.length}})</div>\n      </div>\n    </div>\n    <div class=\"q-mt-md text-center\">\n      <button @click=\"gameStart()\">ゲーム開始</button>\n    </div>\n  </div>\n</template>\n<script>\n  import axios from 'axios'\n  export default {\n    computed: {\n      roomClassesSum: function () {\n        if (this.roomClasses !== null){\n          let sum = 0\n          for(let klass in this.roomClasses)\n            sum += this.roomClasses[klass]\n          return sum\n        }else\n          return 0\n      },\n      roomSlug: function () {return this.$store.getters['room/slug']},\n      roomUsers: function () {return this.$store.getters['room/users']},\n      userName: function () {return this.$store.getters['user/name']},\n      userSlug: function () {return this.$store.getters['user/slug']},\n      roomClasses: {\n        get: function () { return this.$store.getters['room/classes']},\n        set: function (value) { this.$store.commit('room/classes', value) }\n      }\n  },\n    created: function () {\n      // メンバーの変更のソケットを受け付ける\n      const socket = this.$store.getters['socket/socket']\n      const that = this\n      console.log(socket)\n\n      socket.on('/ws/v1/room/response_class_change', function(res){\n        // console.log('役職の割り振りが変更されたよ〜', res)\n        that.roomClasses = res.classes\n      })\n      socket.on('/ws/v1/game/response_start', function(res){\n        alert('ゲーム開始しました！^^')\n      })\n    },\n    destroyed: function () {\n      const socket = this.$store.getters['socket/socket']\n      socket.off('/ws/v1/room/class')\n      socket.off('/ws/v1/game/response_start')\n    },\n    methods: {\n      plus: function (klass){\n        this.roomClasses[klass] ++\n        const socket = this.$store.getters['socket/socket']\n        socket.emit('/ws/v1/room/request_class_change', {userSlug: this.userSlug, roomSlug: this.roomSlug, classes: this.roomClasses})\n      },\n      minus: function (klass){\n        if (this.roomClasses[klass] > 0) this.roomClasses[klass] --\n        const socket = this.$store.getters['socket/socket']\n        socket.emit('/ws/v1/room/request_class_change', {userSlug: this.userSlug, roomSlug: this.roomSlug, classes: this.roomClasses})\n      },\n      gameStart: function (){\n        console.log('ゲーム開始リクエスト')\n        const socket = this.$store.getters['socket/socket']\n        socket.emit('/ws/v1/game/request_start', {userSlug: this.userSlug, roomSlug: this.roomSlug})\n      }\n    }\n  }\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameWaiting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameWaiting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GameWaiting.vue?vue&type=template&id=af55cb2e&\"\nimport script from \"./GameWaiting.vue?vue&type=script&lang=js&\"\nexport * from \"./GameWaiting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-if=\"!isLoading\">\n    <div>\n      <div>ルーム{{ roomSlug }}</div>\n    </div>\n    <div>\n      {{ userPhase }}\n      <GameWaiting></GameWaiting>\n      <!--\n      <div>{{ userName }}({{ userSlug }})</div>\n      <div>メンバー</div>\n      <ul>\n        <li v-for=\"roomUser in roomUsers\">{{roomUser.name}}({{roomUser.slug}})</li>\n      </ul>\n      <div>役職</div>\n      <ul>\n        <li v-for=\"(value, klass) in roomClasses\">{{klass}}×{{ value || 0 }}</li>\n      </ul>\n      //-->\n    </div>\n  </div>\n  <div v-else>\n    入室中...\n  </div>\n</template>\n<script>\n  import GameWaiting from '../components/GameWaiting'\n\n  export default {\n    data () {\n      return {\n        isLoading: true\n      }\n    },\n    components: {\n      GameWaiting\n    },\n    computed: {\n      roomSlug: function () {return this.$router.history.current.params.roomSlug},\n      roomUsers: function () {return this.$store.getters['room/users']},\n      roomClasses: function () {return this.$store.getters['room/classes']},\n      userName: function () {return this.$store.getters['user/name']},\n      userSlug: function () {return this.$store.getters['user/slug']},\n      userPhase: function () { return this.$store.getters['users/phase'] }\n    },\n    created: function() {\n      // 入室処理\n      const that = this\n        console.log('入室しようとする')\n        that.$store.dispatch('room/enter', {roomSlug: that.roomSlug}).then(function(res){\n          console.log('入室完了', res)\n          if(!that.userName){\n            that.$router.push({path: '/profile', query: {redirect_to: '/room/'+that.roomSlug}})\n            return\n          }\n          // 画面を見せる\n          that.isLoading = false\n        }).catch(function(err){\n          that.$router.push({path: '/'})\n          alert('部屋が見つかりませんでした')\n        })\n    }\n  }\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=fb50694a&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}