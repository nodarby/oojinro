(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4813"],{"3ab1":function(s,t,e){"use strict";e.r(t);var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.isLoading?e("div",[s._v("\n  入室中...\n")]):e("div",[e("div",[e("div",[s._v("ルーム"+s._s(s.roomSlug))]),e("div",[s._v(s._s(s.userName)+"("+s._s(s.userKlass)+")["+s._s(s.userPhase)+"]")])]),e("div",[e(s.userPhase,{tag:"component"}),e("div",[s._v(s._s(s.userName)+"("+s._s(s.userSlug)+")")]),e("div",[s._v("メンバー")]),e("ul",s._l(s.roomUsers,function(t){return e("li",[s._v(s._s(t.name)+"("+s._s(t.slug)+")")])}),0),e("div",[s._v("役職")]),e("ul",s._l(s.roomClasses,function(t,r){return e("li",[s._v(s._s(r)+"×"+s._s(t||0))])}),0)],1)])},o=[],n=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticStyle:{padding:"16px"}},[e("div",[e("div",{staticStyle:{"font-size":"1.5em"}},[s._v("参加プレイヤー一覧")]),s._l(s.roomUsers,function(t){return e("div",{key:t.slug},[e("div",[s._v(s._s(t.name))])])})],2),e("div",[e("div",{staticStyle:{"font-size":"1.5em"}},[s._v("役職一覧")]),s._l(s.roomClasses,function(t,r){return e("div",{key:r},[e("div",[s._v(s._s(r)),e("button",{attrs:{color:"blue"},on:{click:function(t){return s.plus(r)}}},[s._v("+")]),e("span",{staticStyle:{width:"50px","text-align":"center",display:"inline-block"}},[s._v(s._s(t||0))]),e("button",{on:{click:function(t){return s.minus(r)}}},[s._v("-")])])])}),e("div",[e("div",[s._v("合計"+s._s(s.roomClassesSum)+"/("+s._s(s.roomClassesSum-s.roomUsers.length)+")")])])],2),e("div",{staticClass:"q-mt-md text-center"},[e("button",{on:{click:function(t){return s.gameStart()}}},[s._v("ゲーム開始")])])])},u=[],i=(e("bc3a"),{computed:{roomClassesSum:function(){if(null!==this.roomClasses){var s=0;for(var t in this.roomClasses)s+=this.roomClasses[t];return s}return 0},roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},roomClasses:{get:function(){return this.$store.getters["room/classes"]},set:function(s){this.$store.commit("room/classes",s)}}},created:function(){var s=this.$store.getters["socket/socket"],t=this;console.log(s),s.on("/ws/v1/room/response_class_change",function(s){console.log("役職の割り振りが変更されたよ〜",s),t.roomClasses=s.classes}),s.on("/ws/v1/game/response_start",function(s){alert("ゲーム開始しました！^^"),t.$store.commit("user/phase","NightAction"),t.$store.commit("user/klass",s.class)})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/room/class"),s.off("/ws/v1/game/response_start")},methods:{plus:function(s){this.roomClasses[s]++;var t=this.$store.getters["socket/socket"];t.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClasses})},minus:function(s){this.roomClasses[s]>0&&this.roomClasses[s]--;var t=this.$store.getters["socket/socket"];t.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClasses})},gameStart:function(){console.log("ゲーム開始リクエスト");var s=this.$store.getters["socket/socket"];s.emit("/ws/v1/game/request_start",{userSlug:this.userSlug,roomSlug:this.roomSlug})}}}),a=i,l=e("2877"),c=Object(l["a"])(a,n,u,!1,null,null,null),m=c.exports,g=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticStyle:{padding:"16px"}},[e("div",{staticStyle:{"font-size":"2em"}},[s._v("あなたの役職は「"+s._s(s.userKlass)+"」です")]),e("div",["村人"==s.userKlass?e("span",[s._v("\n      あなたは村人です．なにもねェ．\n    ")]):"占い師"==s.userKlass?e("span",[s._v("\n      あなたは占い師です．占えェ．\n      "),s.uranaiResult?e("div",[s._v("\n        "+s._s(s.uranaiResult)+"でした．乙．\n        "),e("button",[s._v("終わり")])]):e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:s.targetSlug,expression:"targetSlug"}],on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(s){return s.selected}).map(function(s){var t="_value"in s?s._value:s.value;return t});s.targetSlug=t.target.multiple?e:e[0]}}},[e("option",{attrs:{value:""}},[s._v("-")]),s._l(s.roomUsers,function(t){return e("option",{domProps:{value:t.slug}},[s._v(s._s(t.name))])})],2),e("button",{on:{click:function(t){return s.action()}}},[s._v("占う")])])]):"吊人"==s.userKlass?e("span",[s._v("\n      あなたは吊人です．◯ねぇ．\n    ")]):"狩人"==s.userKlass?e("span",[s._v("\n      あなたは狩人です．守れェ．\n    ")]):"狂人"==s.userKlass?e("span",[s._v("\n      あなたは狂人です．狂えェ．\n    ")]):"人狼"==s.userKlass?e("span",[s._v("\n      あなたは人狼です．殺せェ．\n    ")]):"怪盗"==s.userKlass?e("span",[s._v("\n      あなたは怪盗です．盗めェ．\n    ")]):s._e()])])},v=[],h={data:function(){return{targetSlug:"",uranaiResult:""}},computed:{roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},userPhase:function(){return this.$store.getters["user/phase"]},userKlass:function(){return this.$store.getters["user/klass"]}},created:function(){var s=this.$store.getters["socket/socket"],t=this;s.on("/ws/v1/game/response_uranai",function(s){console.log(s.targetClass),t.uranaiResult=s.targetClass})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/game/response_uranai")},methods:{action:function(){if("占い師"==this.userKlass){var s=this.$store.getters["socket/socket"];s.emit("/ws/v1/game/request_uranai",{userSlug:this.userSlug,roomSlug:this.roomSlug,targetSlug:this.targetSlug})}}}},_=h,f=Object(l["a"])(_,g,v,!1,null,null,null),d=f.exports,p={data:function(){return{isLoading:!0}},components:{GameWaiting:m,NightAction:d},computed:{roomSlug:function(){return this.$router.history.current.params.roomSlug},roomUsers:function(){return this.$store.getters["room/users"]},roomClasses:function(){return this.$store.getters["room/classes"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},userPhase:function(){return this.$store.getters["user/phase"]},userKlass:function(){return this.$store.getters["user/klass"]}},created:function(){var s=this;console.log("入室しようとする"),s.$store.dispatch("room/enter",{roomSlug:s.roomSlug}).then(function(t){console.log("入室完了",t),s.userName?s.isLoading=!1:s.$router.push({path:"/profile",query:{redirect_to:"/room/"+s.roomSlug}})}).catch(function(t){s.$router.push({path:"/"}),alert("部屋が見つかりませんでした")})}},S=p,$=Object(l["a"])(S,r,o,!1,null,null,null);t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d0c4813.773aff05.js.map