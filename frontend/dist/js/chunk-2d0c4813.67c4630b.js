(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4813"],{"3ab1":function(s,e,o){"use strict";o.r(e);var t=function(){var s=this,e=s.$createElement,o=s._self._c||e;return s.isLoading?o("div",[s._v("\n  入室中...\n")]):o("div",[o("h1",[s._v("ルーム"+s._s(s.roomSlug))]),o("h3",[s._v(s._s(s.userName)+"("+s._s(s.userSlug)+")")]),o("h2",[s._v("メンバー")]),o("ul",s._l(s.roomUsers,function(e){return o("li",[s._v(s._s(e.name)+"("+s._s(e.slug)+")")])}),0),o("h2",[s._v("役職")]),o("ul",s._l(s.roomClasses,function(e,t){return o("li",[s._v(s._s(t)+"×"+s._s(e||0))])}),0),o("GameWaiting")],1)},r=[],n=function(){var s=this,e=s.$createElement,o=s._self._c||e;return o("div",[o("h2",[s._v("GameWaiting画面")]),o("h3",[s._v("合計: "+s._s(s.roomClassesSum)+"("+s._s(s.roomClassesSum-s.roomUsers.length)+")")]),o("ul",s._l(s.roomClassesTemp,function(e,t){return o("li",[s._v(s._s(t)+"×"+s._s(e||0)),o("button",{on:{click:function(e){return s.plus(t)}}},[s._v("+")]),o("button",{on:{click:function(e){return s.minus(t)}}},[s._v("-")])])}),0),o("button",[s._v("ゲーム開始")])])},u=[],i=(o("bc3a"),{data:function(){return{roomClassesTemp:null}},computed:{roomClassesSum:function(){if(null!==this.roomClassesTemp){var s=0;for(var e in this.roomClassesTemp)s+=this.roomClassesTemp[e];return s}return 0},roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]}},created:function(){this.roomClassesTemp=this.$store.getters["room/classes"];var s=this.$store.getters["socket/socket"],e=this;console.log(s),s.on("/ws/v1/room/response_class_change",function(s){console.log("役職の割り振りが変更されたよ〜",s),e.$store.commit("room/classes",s.classes)})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/room/class")},methods:{plus:function(s){this.roomClassesTemp[s]++;var e=this.$store.getters["socket/socket"];e.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClassesTemp})},minus:function(s){this.roomClassesTemp[s]>0&&this.roomClassesTemp[s]--;var e=this.$store.getters["socket/socket"];e.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClassesTemp})}}}),l=i,c=o("2877"),m=Object(c["a"])(l,n,u,!1,null,null,null),a=m.exports,h={data:function(){return{isLoading:!0}},components:{GameWaiting:a},computed:{roomSlug:function(){return this.$router.history.current.params.roomSlug},roomUsers:function(){return this.$store.getters["room/users"]},roomClasses:function(){return this.$store.getters["room/classes"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]}},created:function(){var s=this;console.log("入室しようとする"),s.$store.dispatch("room/enter",{roomSlug:s.roomSlug}).then(function(e){console.log("入室完了",e),s.userName?s.isLoading=!1:s.$router.push({path:"/profile",query:{redirect_to:"/room/"+s.roomSlug}})}).catch(function(e){s.$router.push({path:"/"}),alert("部屋が見つかりませんでした")})}},g=h,_=Object(c["a"])(g,t,r,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0c4813.67c4630b.js.map