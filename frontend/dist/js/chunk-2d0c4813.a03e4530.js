(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4813"],{"3ab1":function(s,e,t){"use strict";t.r(e);var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return s.isLoading?t("div",[s._v("\n  入室中...\n")]):t("div",[t("div",[t("div",[s._v("ルーム"+s._s(s.roomSlug))]),t("div",[s._v(s._s(s.userName)+"("+s._s(s.userKlass)+")["+s._s(s.userPhase)+"]")])]),t("div",[t(s.userPhase,{tag:"component"}),t("div",[s._v(s._s(s.userName)+"("+s._s(s.userSlug)+")")]),t("div",[s._v("メンバー")]),t("ul",s._l(s.roomUsers,function(e){return t("li",[s._v(s._s(e.name)+"("+s._s(e.slug)+")")])}),0),t("div",[s._v("役職")]),t("ul",s._l(s.roomClasses,function(e,r){return t("li",[s._v(s._s(r)+"×"+s._s(e||0))])}),0)],1)])},o=[],n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticStyle:{padding:"16px"}},[t("div",[t("div",{staticStyle:{"font-size":"1.5em"}},[s._v("参加プレイヤー一覧")]),s._l(s.roomUsers,function(e){return t("div",{key:e.slug},[t("div",[s._v(s._s(e.name))])])})],2),t("div",[t("div",{staticStyle:{"font-size":"1.5em"}},[s._v("役職一覧")]),s._l(s.roomClasses,function(e,r){return t("div",{key:r},[t("div",[s._v(s._s(r)),t("button",{attrs:{color:"blue"},on:{click:function(e){return s.plus(r)}}},[s._v("+")]),t("span",{staticStyle:{width:"50px","text-align":"center",display:"inline-block"}},[s._v(s._s(e||0))]),t("button",{on:{click:function(e){return s.minus(r)}}},[s._v("-")])])])}),t("div",[t("div",[s._v("合計"+s._s(s.roomClassesSum)+"/("+s._s(s.roomClassesSum-s.roomUsers.length)+")")])])],2),t("div",{staticClass:"q-mt-md text-center"},[t("button",{on:{click:function(e){return s.gameStart()}}},[s._v("ゲーム開始")])])])},u=[],i=(t("bc3a"),{computed:{roomClassesSum:function(){if(null!==this.roomClasses){var s=0;for(var e in this.roomClasses)s+=this.roomClasses[e];return s}return 0},roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},roomClasses:{get:function(){return this.$store.getters["room/classes"]},set:function(s){this.$store.commit("room/classes",s)}}},created:function(){var s=this.$store.getters["socket/socket"],e=this;console.log(s),s.on("/ws/v1/room/response_class_change",function(s){console.log("役職の割り振りが変更されたよ〜",s),e.roomClasses=s.classes}),s.on("/ws/v1/game/response_start",function(s){alert("ゲーム開始しました！^^"),e.$store.commit("user/phase","NightAction"),e.$store.commit("user/klass",s.class)})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/room/class"),s.off("/ws/v1/game/response_start")},methods:{plus:function(s){this.roomClasses[s]++;var e=this.$store.getters["socket/socket"];e.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClasses})},minus:function(s){this.roomClasses[s]>0&&this.roomClasses[s]--;var e=this.$store.getters["socket/socket"];e.emit("/ws/v1/room/request_class_change",{userSlug:this.userSlug,roomSlug:this.roomSlug,classes:this.roomClasses})},gameStart:function(){console.log("ゲーム開始リクエスト");var s=this.$store.getters["socket/socket"];s.emit("/ws/v1/game/request_start",{userSlug:this.userSlug,roomSlug:this.roomSlug})}}}),a=i,l=t("2877"),c=Object(l["a"])(a,n,u,!1,null,null,null),g=c.exports,m=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticStyle:{padding:"16px"}},[t("div",{staticStyle:{"font-size":"2em"}},[s._v("あなたの役職は「"+s._s(s.userKlass)+"」です")]),t("div",["村人"==s.userKlass?t("span",[s._v("\n      あなたは村人です．なにもねェ．"),t("br"),t("button",[s._v("終わり")])]):"占い師"==s.userKlass?t("span",[s._v("\n      あなたは占い師です．占えェ．"),t("br"),t("select",{directives:[{name:"model",rawName:"v-model",value:s.target,expression:"target"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var e="_value"in s?s._value:s.value;return e});s.target=e.target.multiple?t:t[0]}}},[t("option",{attrs:{value:""}},[s._v("場（のこり）")]),s._l(s.roomUsers.filter(function(e){return e.slug!=s.userSlug}),function(e){return t("option",{domProps:{value:e}},[s._v(s._s(e.name))])})],2),t("button",{on:{click:function(e){return s.action()}}},[s._v("占う")])]):"吊人"==s.userKlass?t("span",[s._v("\n      あなたは吊人です．◯ねぇ．"),t("br"),t("button",[s._v("終わり")])]):"狂人"==s.userKlass?t("span",[s._v("\n      あなたは狂人です．狂えェ．"),t("br"),t("button",[s._v("終わり")])]):"人狼"==s.userKlass?t("span",[s._v("\n      あなたは人狼です．殺せェ．"),t("br"),t("button",{on:{click:function(e){return s.action()}}},[s._v("仲間を見つける")])]):"怪盗"==s.userKlass?t("span",[s._v("\n      あなたは怪盗です．盗めェ．"),t("br"),t("select",{directives:[{name:"model",rawName:"v-model",value:s.target,expression:"target"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var e="_value"in s?s._value:s.value;return e});s.target=e.target.multiple?t:t[0]}}},[t("option",{attrs:{value:""}},[s._v("-")]),s._l(s.roomUsers.filter(function(e){return e.slug!=s.userSlug}),function(e){return t("option",{domProps:{value:e}},[s._v(s._s(e.name))])})],2),t("button",{attrs:{disabled:!s.target},on:{click:function(e){return s.action()}}},[s._v("盗む")])]):s._e()])])},v=[],h={data:function(){return{target:""}},computed:{roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},userPhase:function(){return this.$store.getters["user/phase"]},userKlass:function(){return this.$store.getters["user/klass"]}},created:function(){var s=this.$store.getters["socket/socket"],e=this;s.on("/ws/v1/game/response_uranai",function(s){console.log(s),e.$store.commit("user/target",s.target),e.$store.commit("user/phase","NightResult")}),s.on("/ws/v1/game/response_kaito",function(s){console.log(s),e.$store.commit("user/target",s.target),e.$store.commit("user/newKlass",s.new_class),e.$store.commit("user/phase","NightResult")}),s.on("/ws/v1/game/response_jinro",function(s){console.log(s),e.$store.commit("user/target",s.target),e.$store.commit("user/phase","NightResult")})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/game/response_uranai"),s.off("/ws/v1/game/response_kaito"),s.off("/ws/v1/game/response_jinro")},methods:{action:function(){var s=this.$store.getters["socket/socket"];if("占い師"==this.userKlass){console.log(this.target);var e=this.target.slug;this.target||(e=""),s.emit("/ws/v1/game/request_uranai",{userSlug:this.userSlug,roomSlug:this.roomSlug,targetSlug:e})}else if("怪盗"==this.userKlass){console.log(this.target);var t=this.target.slug;s.emit("/ws/v1/game/request_kaito",{userSlug:this.userSlug,roomSlug:this.roomSlug,targetSlug:t})}else"人狼"==this.userKlass&&s.emit("/ws/v1/game/request_jinro",{userSlug:this.userSlug,roomSlug:this.roomSlug})}}},_=h,f=Object(l["a"])(_,m,v,!1,null,null,null),p=f.exports,d=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticStyle:{padding:"16px"}},[t("div",{staticStyle:{"font-size":"2em"}},[s._v("あなたの役職は「"+s._s(s.userKlass)+"」です")]),t("div",["占い師"==s.userKlass?t("span",[s._v("\n      あなたは占い師です．占ったゾォ"),t("br"),s.userTarget.field?t("span",[s._v("\n        場を占ったら"+s._s(s.userTarget.class)+"でした"),t("br")]):t("span",[s._v("\n        "+s._s(s.userTarget.name)+"は"+s._s(s.userTarget.class)+"でした"),t("br")]),t("button",[s._v("終わり")])]):"人狼"==s.userKlass?t("span",[s._v("\n      あなたは人狼です．仲間を見つけたゾォ"),t("br"),s._l(s.userTarget,function(e){return t("span",[s._v(s._s(e.name))])}),t("br"),t("button",[s._v("終わり")])],2):"怪盗"==s.userKlass?t("span",[s._v("\n      あなたは怪盗です．盗んだゾォ"),t("br"),s._v("\n      "+s._s(s.userTarget.name)+"から"+s._s(s.userNewKlass)+"を奪いました！"),t("br"),t("button",[s._v("終わり")])]):s._e()])])},S=[],$={computed:{roomSlug:function(){return this.$store.getters["room/slug"]},roomUsers:function(){return this.$store.getters["room/users"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},userPhase:function(){return this.$store.getters["user/phase"]},userKlass:function(){return this.$store.getters["user/klass"]},userNewKlass:function(){return this.$store.getters["user/newKlass"]},userTarget:function(){return this.$store.getters["user/target"]}},created:function(){var s=this.$store.getters["socket/socket"],e=this;s.on("/ws/v1/game/response_night_end",function(s){console.log(s),e.$store.commit("user/phase","NightEnd")})},destroyed:function(){var s=this.$store.getters["socket/socket"];s.off("/ws/v1/game/response_night_end")},methods:{action:function(){var s=this.$store.getters["socket/socket"];s.emit("/ws/v1/game/request_night_end",{userSlug:this.userSlug,roomSlug:this.roomSlug})}}},k=$,b=Object(l["a"])(k,d,S,!1,null,null,null),w=b.exports,K={data:function(){return{isLoading:!0}},components:{GameWaiting:g,NightAction:p,NightResult:w},computed:{roomSlug:function(){return this.$router.history.current.params.roomSlug},roomUsers:function(){return this.$store.getters["room/users"]},roomClasses:function(){return this.$store.getters["room/classes"]},userName:function(){return this.$store.getters["user/name"]},userSlug:function(){return this.$store.getters["user/slug"]},userPhase:function(){return this.$store.getters["user/phase"]},userKlass:function(){return this.$store.getters["user/klass"]}},created:function(){var s=this;console.log("入室しようとする"),s.$store.dispatch("room/enter",{roomSlug:s.roomSlug}).then(function(e){console.log("入室完了",e),s.userName?(s.$store.commit("user/newKlass",e.new_class),s.$store.commit("user/klass",e.class),s.$store.commit("user/target",e.target),s.$store.commit("user/phase",e.phase),s.isLoading=!1):s.$router.push({path:"/profile",query:{redirect_to:"/room/"+s.roomSlug}})}).catch(function(e){s.$router.push({path:"/"}),alert("部屋が見つかりませんでした")})}},y=K,N=Object(l["a"])(y,r,o,!1,null,null,null);e["default"]=N.exports}}]);
//# sourceMappingURL=chunk-2d0c4813.a03e4530.js.map